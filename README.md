# Compiler-implemented-in-Python
compiler for custom made programming language minimal++

Lexical analysis

    Ο λεκτικός αναλυτής καλείται ως συνάρτηση από τον συντακτικό αναλυτή. Διαβάζει γράμμα-γράμμα τον πηγαίο κώδικα και κάθε φορά που καλείται επιστρέφει την επόμενη λεκτική μονάδα 
    και έναν ακέραιο που την χαρακτηρίζει. Στην προγραμματιστική μας άσκηση η συνάρτηση αυτή είναι η lexical() η οποία διαχειρίζεται το αρχείο που περιέχει τον πηγαίο κώδικα. 
    Συγκεκριμένα λειτουργεί με καταστάσεις στις οποίες μεταβαίνει ανάλογα τον χαρακτήρα που διαβάζει. Η αρχική κατάσταση ανανεώνεται μόλις βρεθεί λεκτική μονάδα όπως και η τρέχουσα 
    θέση του αρχείου. Μόλις αναγνωριστεί λεκτική μονάδα καλείται η συνάρτηση tokenize() η οποία κρατάει τη λεκτική μονάδα (token) καθώς και έναν μοναδικό ακέραιο που την χαρακτηρίζει
    (tokenid). Σε περίπτωση που συναντήσει δύο χαρακτήρες «/» στη σειρά, αντιλαμβάνεται ότι υπάρχει σχόλιο γραμμής οπότε διαβάζει την τρέχουσα γραμμή μόνο για να ανανεώσει την θέση 
    και να ξαναθέσει την αρχική κατάσταση. Εάν διαβάσει  «/*» λειτουργεί παρόμοια, αλλά μέχρι να συναντήσει «*/». Ακόμα έχει την δυνατότητα να τερματίζει το πρόγραμμα σε περίπτωση που
    βρεθεί μη αποδεκτός χαρακτήρας ή μη έγκυρη λέξη. Θέτει την κατάσταση ως λανθασμένη (state = error) και τυπώνει τη θέση του λάθους χαρακτήρα. 

Syntax analysis

    Ο συντακτικός αναλυτής  ελέγχει και διαπιστώνει εάν ο πηγαίος κώδικας ανήκει ή όχι στη γλώσσα. Οι συναρτήσεις που απαρτίζουν τον συντακτικό αναλυτή  δημιουργούνται σύμφωνα 
    με τον κάθε κανόνα  της  γραμματικής  της γλώσσας  minimal++ , και μέσα σε αυτές καλούμε κάθε φορά τον λεκτικό αναλυτή. Εάν βρεθεί λεκτική μονάδα που δεν συμφωνεί με τον 
    συντακτικό αναλυτή ή κάποιος κανόνας της γραμματικής δεν τηρείται, τότε επιστρέφει λάθος και τερματίζει το πρόγραμμα.  Όταν ο συντακτικός αναλυτής αναγνωρίσει και τη τελευταία 
    λέξη του πηγαίου κώδικα, σημαίνει ότι η δομή του πηγαίου κώδικα είναι σωστή και ότι η συντακτική ανάλυση στέφθηκε με επιτυχία. Ακόμα, στις συναρτήσεις  του συντακτικού αναλυτή
    στη συνέχεια θα δημιουργηθούν και θα καλεστούν διάφορες  σημαντικές συναρτήσεις.



Intermediate Code

Στον ενδιάμεσο κώδικα δημιουργούμε ένα σύνολο από αριθμημένες τετράδες. Μετά την εκτέλεση μιας τετράδας προχωράμε στην επόμενη, εκτός εάν η τετράδα που μόλις εκτελέστηκε υποδεικνύει 
κάτι διαφορετικό. Οι τετράδες αυτές είναι ιδιαίτερα χρήσιμες καθώς  χρησιμοποιούνται για την παραγωγή του αρχείου C αλλά και του τελικού κώδικα.
Στη προγραμματιστική μας άσκηση χρησιμοποιούμε βοηθητικές συναρτήσεις, οι οποίες καλούνται και χρησιμοποιούνται κάθε φορά όπου πρέπει να δημιουργηθεί μια τετράδα. 
Για παράδειγμα, κάθε φορά που υπάρχει κάποια ανάθεση τιμής, κάποια πράξη, έναρξη ή τέλος μιας συνάρτησης κ.α. Καθώς ο συντακτικός αναλυτής  τρέχει, κάθε τετράδα που δημιουργείται 
μπαίνει σε μια λίστα (quadlist). Όταν ο συντακτικός αναλυτής τερματίσει ομαλά αντιγράφουμε την, αριθμημένη πλέον,  λίστα σε ένα αρχείο  “.int”.


    C File

Για το “.c”  αρχείο  χρησιμοποιούμε μια λίστα, την οποία αρχικά την γεμίζουμε με τις απαραίτητες δηλώσεις, και στη συνέχεια κάθε τετράδα του ενδιάμεσου κώδικα  κατάλληλα γραμμένη, 
ανάλογα τον πρώτο τελεστή της. Σε περίπτωση που υπάρχει συνάρτηση στον πηγαίο κώδικα, το αρχείο C δεν θα λειτουργήσει όπως θα έπρεπε. Για τον λόγο αυτό,   
χρησιμοποιούμε μια καθολική μεταβλητή  “func”  η οποία γίνεται  1 εάν ο συντακτικός αναλυτής  αναγνωρίσει συνάρτηση.  Εάν η “func” είναι ίση με ένα τότε στο τερματικό εμφανίζεται 
μήνυμα ενημέρωσης στον χρήστη, ότι υπάρχει λάθος στο αρχείο C. Εφόσον δεν περιέχεται συνάρτηση, το αρχείο C εκτελείται κανονικά σε μεταφραστή C.



Symbol Table

Τον πίνακα συμβόλων απαρτίζουν τα αντικείμενα Scopes τα οποία δημιουργούνται για κάθε συνάρτηση του πηγαίου κώδικα. Τα Scopes αποτελούνται από τέσσερα πεδία. 
Τις οντότητες (Entities) οι οποίες περιέχουν μεταβλητές, συναρτήσεις, σταθερές, παραμέτρους και προσωρινές μεταβλητές, με όλα τα στοιχεία που τις χαρακτηρίζουν όπως όνομα, τύπος κ.α.
Ακόμα περιέχει το επίπεδο φωλιάσματος (nesting) όπου το main Scope έχει επίπεδο 0 και τα επόμενα μεγαλύτερο ή ίσο του, το enclosingScope  το οποίο δείχνει στο προηγούμενο Scope από αυτό
που διατρέχεται, και το functionName το οποίο κρατάει το όνομα του τρέχοντος Scope. Για την σωστή υλοποίηση του πίνακα συμβόλων χρησιμοποιούμε βοηθητικές τις οποίες καλούμε όπου 
αυτές χρειάζονται στον συντακτικό αναλυτή. Στο τέλος της μετάφρασης κάποιου Scope υπολογίζεται ένα μήκος εγγραφήματος δραστηριοποίησης (framelength), δηλαδή το μήκος της λίστας 
entities, επί 4 και αυξημένο κατά 12, και το Scope αυτό διαγράφεται μαζί με όλα τα περιεχόμενα του (deleteScope()).  Τα περιεχόμενα του πίνακα συμβόλων και ο τρόπος λειτουργίας του,
είναι απαραίτητα για την ορθή λειτουργία του τελικού μας κώδικα. 

Final Code

Στη παραγωγή τελικού κώδικα δημιουργούμε ένα αρχείο “.asm” το οποίο περιέχει τις κατάλληλες assembly εντολές σύμφωνα με τις τετράδες του ενδιάμεσου κώδικα και αριθμημένα label 
που αντιστοιχούν στις τετράδες αυτές. Γεμίζουμε μια λίστα (finalCode) με τις κατάλληλες εντολές η οποία γράφεται στο αρχείο “.asm” ώστε να μπορεί να εκτελεστεί από τον επεξεργαστή 
MIPS. 
